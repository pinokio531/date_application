<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<html>

<head>
	<meta charset="UTF-8">
	<title>두근두근 데이트</title>
	<link rel="stylesheet" type="text/css" href="style/menu.css" />
	<script type="text/javascript"
		src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8d9fa66b5a57ed1782dfb50131b06dfd"></script>
		<%@include file = "f_loaddata.jsp" %>
		<%! Double rslo = 0.0;
		Double rsla = 0.0;
		Double rs2lo = 0.0;
		Double rs2la = 0.0;
		String shopname = "";
		String category = "";%>
	<script>
	function boxClickSetting(){
		alert("zmfflr");
    }
	window.onload = function () {
	}
	function bt_shop_click_event(map, latitude, longtitude){
		var sLatitude = latitude;
		var sLongtitude = longtitude;
		var imageSrc = 'http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_red.png', // 마커이미지의 주소입니다    
	    imageSize = new daum.maps.Size(64, 69), // 마커이미지의 크기입니다
	    imageOption = {offset: new daum.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.
	      
	// 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
	var markerImage = new daum.maps.MarkerImage(imageSrc, imageSize, imageOption),
	    markerPosition = new daum.maps.LatLng(sLatitude, sLongtitude); // 마커가 표시될 위치입니다

	// 마커를 생성합니다
	var marker = new daum.maps.Marker({
	    position: markerPosition, 
	    image: markerImage // 마커이미지 설정 
	});
	    
	marker.setMap(map)
	}
	function settingMap() {
		var container = document.getElementById('map');
		var options = {
			center: new daum.maps.LatLng(<%= mLatitude%>, <%= mLongtitude%>),
			level: 3
		};
		var map = new daum.maps.Map(container, options);
		<% while(rs.next()){
			rs2lo = Double.parseDouble(rs.getString("longtitude"));
			rs2la = Double.parseDouble(rs.getString("latitude"));
			shopname = rs.getString("shopname");
			category = rs.getString("bigname");%>
			var rcLocation = new daum.maps.LatLng(<%= rs2la%>, <%= rs2lo%>);
			var mkLocation = new daum.maps.Marker(
				{
					position: rcLocation
				}
			)
			
			mkLocation.setMap(map)
			var jbBtn = document.createElement( 'input' );
			jbBtn.type = 'button';
			jbBtn.value = "<<%= category%>> <%=shopname%>";
			jbBtn.id = "shopInfo";
			document.body.appendChild(jbBtn);
			
			var bt = document.getElementById('shopInfo');
			bt.addEventListener("click", boxClickSetting);
			<%
			
		}
		%>
		
	}
</script>
</head>

<body>
	<%! Double lo = 0.0;
		Double la = 0.0;%>
	장소 : <%= location %> <br>
	좌표 : (<%= mLatitude %>, <%= mLongtitude %>)
	<div id="mainContent">
		<div id="map" style="width:500px; height:500px;"></div>
	<script>
	settingMap();
	</script>
	<div>
		<div id="category">
			<ul>
				<li>음식점(중복 선택 가능)</li>
				한식<input type="checkbox" name="food" value="resturant">
				양식<input type="checkbox" name="food" value="resturant">
				중식<input type="checkbox" name="food" value="resturant">
				일식<input type="checkbox" name="food" value="resturant">
				기타<input type="checkbox" name="food" value="resturant">
				<li>그 외 가고싶은 장소(중복 선택 가능)</li>
				카페<input type="checkbox" name="place" value="destination">
				노래방<input type="checkbox" name="place" value="destination">
			</ul>
			<p>지도에서 가고싶은 지역을 선택후 장소를 체크합니다.</p>
		</div>
		<div id="location">
		<form action="f_savecourse.jsp" method="post">
		1번 장소 : <input type="text" name="loc1"><br><br>
		2번 장소 : <input type="text" name="loc2"><br><br>
		3번 장소 : <input type="text" name="loc3"><br><br>
		4번 장소 : <input type="text" name="loc4"><br><br>
		5번 장소 : <input type="text" name="loc5"><br><br>
		<input type="submit" value="확정">
		</div>
	</div>
	<a href="mypage.jsp">내 기록 보기</a>
	</div>
	<%
	if(rset.next()){
		String bt_first = rset.getString("villageName");
	%>
		<form action="f_bt_location.jsp" method="get">
		<input type="submit" name="clicked_location" value=<%=bt_first %>>
	</form>
	<%
		while(rset.next()){
			vName = rset.getString("villageName");%>
			<form action="f_bt_location.jsp" method="get">
				<input type="submit" name="clicked_location" value="<%=vName %>">
			</form>
			<%
		}
	}%>
	
	<div id="bt_shop" style="background-color:pink; height:300px; weight:300px;"></div>
</body>

</html>